"use strict";function addAutocomplete(e,t,n,u){e.bind("keydown",function(e){e.keyCode===$.ui.keyCode.TAB&&$(this).data("autocomplete").menu.active&&e.preventDefault()}).autocomplete({minLength:1,source:function e(n,u){var o=n.term,i=[],l=o.lastIndexOf("#")>o.lastIndexOf("@")?"#":"@";o.indexOf(l)>=0&&(o=n.term.split(new RegExp(l+"\\s*")).pop()).length>0&&(i=$.ui.autocomplete.filter(t,o)),u(i)},focus:function e(){return!1},select:function t(u,o){var i,l=e.val(),s;return l.lastIndexOf("#")>l.lastIndexOf("@")?i=l.split(/#\s*/):(i=l.split(/@\s*/),o.item.value="@"+o.item.value+":"),i.pop(),i.push(o.item.value),i.push(""),e.val(i.join("")),void 0!==n&&n(),!1},close:u,autoFocus:!0})}