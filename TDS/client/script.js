/* Copyright by Bonus!
 * Stealing is not allowed! */
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e,s){return new Vector3(t.X+(e.X-t.X)*s,t.Y+(e.Y-t.Y)*s,t.Z+(e.Z-t.Z)*s)}var s=function(){function t(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,s,i){return s&&t(e.prototype,s),i&&t(e,i),e}}();API.onLocalPlayerShoot.connect(function(t,s){var i=API.getEntityPosition(API.getLocalPlayer()),r=e(i,s,1.1),a=API.createRaycast(i,r,8,null);if(a.didHitEntity){var n=a.hitEntity,h=!1,o=API.returnNative("GET_PED_BONE_COORDS",5,n,39317);s.Z>o.Z&&(h=!0),mp.events.callRemote("onPlayerHitOtherPlayer",n,t,h)}}),API.onResourceStart.connect(function(){API.callNative("NETWORK_SET_FRIENDLY_FIRE_OPTION",!1)});!function(){API.onResourceStart.connect(function(){mp.events.callRemote("onPlayerJoin")})}();var i=void 0;API.onServerEventTrigger.connect(function(t,e){"startRegisterLogin"==t&&((i=new n("../window/registerlogin/index.html")).setHeadless(!0),i.setCursorVisible(!0),i.load(),i.call("getData",e[0],e[1]))});var r=[];API.onUpdate.connect(function(){for(var t=API.getGameTime(),e=0;e<r.length&&r[e].executeatms<=t;e++)r[e].execute(e)});!function(){function e(s,i,a,n){return t(this,e),this.func=s,this.executeatms=i+API.getGameTime(),this.executeafterms=i,this.executeamountleft=a,this.args=n,r[r.length]=this,this}s(e,[{key:"kill",value:function(){for(var t=0;t<r.length;t++)r[t]==this&&r.splice(t,1)}},{key:"execute",value:function(t){switch(this.args.length){case 0:this.func();break;case 1:this.func(this.args[0]);break;case 2:this.func(this.args[0],this.args[1]);break;case 3:this.func(this.args[0],this.args[1],this.args[2]);break;case 4:this.func(this.args[0],this.args[1],this.args[2],this.args[3]);break;case 5:this.func(this.args[0],this.args[1],this.args[2],this.args[3],this.args[4]);break;case 6:this.func(this.args[0],this.args[1],this.args[2],this.args[3],this.args[4],this.args[5]);break;case 7:this.func(this.args[0],this.args[1],this.args[2],this.args[3],this.args[4],this.args[5],this.args[6]);break;case 8:this.func(this.args[0],this.args[1],this.args[2],this.args[3],this.args[4],this.args[5],this.args[6],this.args[7]);break;case 9:this.func(this.args[0],this.args[1],this.args[2],this.args[3],this.args[4],this.args[5],this.args[6],this.args[7],this.args[8]);break;case 10:this.func(this.args[0],this.args[1],this.args[2],this.args[3],this.args[4],this.args[5],this.args[6],this.args[7],this.args[8],this.args[9])}var s=t;if(null===t)for(t=0;t<r.length&&null===s;t++)r[t]==this&&(s=t);r.splice(s,1),1!=this.executeamountleft&&(this.executeamountleft--,this.executeatms+=this.executeafterms,e.putTimerInSorted(this))}}],[{key:"putTimerInSorted",value:function(t){for(var e=0;e<r.length;e++)if(r[e].executeatms>t.executeatms)return void r.splice(e,0,t);r.push(t)}}])}();var a=[];API.onResourceStart.connect(function(){for(var t=0;t<a.length;t++){var e=a[t];if(e.activated)switch(this.type){case"line":API.drawLine(e.start,e.end,e.a,e.r,e.g,e.b);break;case"rectangle":API.drawRectangle(e.x,e.y,e.width,e.height,e.r,e.g,e.b,e.a);break;case"text":API.drawText(e.text,e.x,e.y,e.scale,e.r,e.g,e.b,e.a,e.font,e.justify,e.shadow,e.outline,e.wordwrap);break;case"editbox":API.drawRectangle(e.x,e.y,e.width,e.height,e.r,e.g,e.b,e.a),API.drawText(e.text,e.x+1,e.y,e.scale,e.textr,e.textg,e.textb,e.texta,e.font,e.justify,e.shadow,e.outline,e.wordwrap)}}});var n=function(){function e(s){t(this,e),this.cursor=!1,this.open=!1,this.external=!1,this.headless=!1,this.chat=!1,this.hud=!1,this.path=s}return s(e,[{key:"load",value:function(){if(!this.open){var t=API.getScreenResolution();this.browser=API.createCefBrowser(t.Width,t.Height,!this.external),API.setCefBrowserPosition(this.browser,0,0),API.setCefBrowserHeadless(this.browser,this.headless),API.loadPageCefBrowser(this.browser,this.path),this.chat||API.setCanOpenChat(!1),this.hud||API.setHudVisible(!1),this.cursor&&API.showCursor(!0),this.setOpen(!0)}}},{key:"destroy",value:function(){API.destroyCefBrowser(this.browser),this.chat||API.setCanOpenChat(!0),this.hud||API.setHudVisible(!0),this.cursor&&API.showCursor(!1),this.setOpen(!1)}},{key:"eval",value:function(t){this.browser.eval(t)}},{key:"call",value:function(t){this.browser.call(t)}},{key:"setExternal",value:function(t){this.external=t}},{key:"setHeadless",value:function(t){this.headless=t}},{key:"setCursorVisible",value:function(t){this.cursor=t}},{key:"setChatVisible",value:function(t){this.chat=t}},{key:"setHudVisible",value:function(t){this.hud=t}},{key:"setOpen",value:function(t){this.open=t}}]),e}();
