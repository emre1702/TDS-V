/* Copyright by Bonus!
 * Stealing is not allowed! */
"use strict";var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=mp.game.graphics.getScreenActiveResolution(0,0),i=0,a=null,s=mp.players.local,o=mp.cameras.new("gameplay"),r=!1;mp.events.addCommand("activatedalogging",function(e,t){r=!r});function l(e){r&&mp.gui.chat.push(e)}mp.events.add("onClientMoneyChange",function(e){l("onClientMoneyChange start"),a=e,l("onClientMoneyChange end")}),mp.events.add("render",function(){null!=a&&mp.game.graphics.drawText("$"+a,7,[115,186,131,255],1,1,!0,n.x-90,50)});function m(e,t,n){return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n,z:e.z+(t.z-e.z)*n}}function c(e){return e+360*Math.ceil(-e/360)}function d(e,t,n,i){var a=c(n)*(Math.PI/180);return i=c(i)*(Math.PI/180),t.X+=e*Math.sin(-a-i),t.Y+=e*Math.cos(-a-i),t}function u(){return Date.now()}mp.keys.bind(35,!0,function(e,t){mp.gui.cursor.visible?(mp.gui.cursor.visible=!1,i=0):(mp.gui.cursor.visible=!0,i=1)});function p(e){return mp.players.forEach(function(t,n){if(t.name==e)return t}),null}function g(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return mp.game.gameplay.getDistanceBetweenCoords(e.x,e.y,e.z,t.x,t.y,t.z,n)}var h=[],f=[];mp.events.add("render",function(){for(var e=u(),t=h.length-1;t>=0;t--)if(h[t].killit)h.splice(t,1);else{if(!(h[t].executeatms<=e))break;var n=h[t];h.splice(t,1),n.execute(!0)}if(f.length>0){for(var i=0;i<f.length;i++)f[i].putTimerInSorted();f=[]}});var b=function(){function n(e,i,a){t(this,n),this.func=e,this.executeatms=i+u(),this.executeafterms=i,this.executeamountleft=a;for(var s=arguments.length,o=Array(s>3?s-3:0),r=3;r<s;r++)o[r-3]=arguments[r];return this.args=o,this.killit=!1,f[f.length]=this,this}return e(n,[{key:"kill",value:function e(){this.killit=!0}},{key:"execute",value:function e(t){l("timer execute start");var n;switch(this.args.length){case 0:this.func();break;case 1:this.func(this.args[0]);break;case 2:this.func(this.args[0],this.args[1]);break;case 3:this.func(this.args[0],this.args[1],this.args[2]);break;case 4:this.func(this.args[0],this.args[1],this.args[2],this.args[3]);break;case 5:this.func(this.args[0],this.args[1],this.args[2],this.args[3],this.args[4]);break;case 6:this.func(this.args[0],this.args[1],this.args[2],this.args[3],this.args[4],this.args[5]);break;case 7:this.func(this.args[0],this.args[1],this.args[2],this.args[3],this.args[4],this.args[5],this.args[6]);break;case 8:this.func(this.args[0],this.args[1],this.args[2],this.args[3],this.args[4],this.args[5],this.args[6],this.args[7]);break;case 9:this.func(this.args[0],this.args[1],this.args[2],this.args[3],this.args[4],this.args[5],this.args[6],this.args[7],this.args[8]);break;case 10:this.func(this.args[0],this.args[1],this.args[2],this.args[3],this.args[4],this.args[5],this.args[6],this.args[7],this.args[8],this.args[9])}if(null==t){var i=h.indexOf(this);h.splice(i,1)}this.executeamountleft--,0!==this.executeamountleft&&(this.executeatms+=this.executeafterms,this.putTimerInSorted()),l("timer execute end")}},{key:"putTimerInSorted",value:function e(){for(var t=h.length-1;t>=0;t--)if(h[t].executeatms>this.executeatms)return void h.splice(t+1,0,this);h.splice(0,0,this)}}]),n}(),y=[];mp.events.add("render",function(){for(var e=u(),t=0;t<y.length;t++){var n=y[t];if(n.activated)switch(n.type){case"rectangle":mp.game.graphics.drawRect(n.x,n.y,n.width,n.height,n.r,n.g,n.b,n.a);break;case"text":var i=n.a;null!=n.enda&&(i=v(e,n.a,n.enda,n.endastarttick,n.endaendtick));var a=n.scale;null!=n.endscale&&(a=v(e,n.scale,n.endscale,n.endscalestarttick,n.endscaleendtick)),mp.game.graphics.drawText(n.text,n.font,n.color,n.scaleX,n.scaleY,n.outline,n.x,n.y)}}});function v(e,t,n,i,a){var s=(e-i)/(a-i);return s>1&&(s=1),t+s*(n-t)}function w(){var e=y.indexOf(this);return-1!=e&&(y.splice(e,1),!0)}function x(e,t){this.enda=e,this.endastarttick=u(),this.endaendtick=this.endastarttick+t}function k(e,t){this.endscale=e,this.endscalestarttick=u(),this.endscaleendtick=this.endscalestarttick+t}function C(){return this.text}function _(e){this.text=e}function S(e,t,n,i,a,s){this.type="line",this.activated=!0,this.start=e,this.end=t,this.r=n,this.g=i,this.b=a,this.a=s,this.remove=w,y.push(this)}function L(e,t,n,i,a,s,o,r){this.type="rectangle",this.activated=!0,this.x=e,this.y=t,this.width=n,this.height=i,this.r=a,this.g=s,this.b=o,this.a=r,this.remove=w,y.push(this)}function P(e,t,n,i,a,s,o,r){this.type="text",this.activated=!0,this.text=e,this.x=t,this.y=n,this.color=a,this.scaleX=s,this.scaleY=o,this.outline=r,this.remove=w,this.blendTextAlpha=x,this.blendTextScale=k,this.getText=C,this.setText=_,y.push(this)}function M(e,t,n,i,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:20,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:20,r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:20,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:187,m=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:255,d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:255,u=arguments.length>12&&void 0!==arguments[12]?arguments[12]:255,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:255,g=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,h=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,f=arguments.length>16&&void 0!==arguments[16]&&arguments[16],b=arguments.length>17&&void 0!==arguments[17]&&arguments[17],v=arguments.length>18&&void 0!==arguments[18]?arguments[18]:0;this.type="editbox",this.activated=!0,this.text=e,this.x=t,this.y=n,this.width=i,this.height=a,this.r=s,this.g=o,this.b=r,this.scale=m,this.textr=c,this.textg=d,this.textb=u,this.texta=p,this.font=g,this.justify=h,this.shadow=f,this.outline=b,this.wordwrap=0==v?Math.floor(i):v,this.remove=w,y.push(this)}var R=0;mp.events.add("render",function(){mp.players.local.health,mp.players.local.armour}),mp.events.add("playerSpawn",function(e){e==s&&mp.game.cam.doScreenFadeIn(2e3)}),mp.events.add("playerDeath",function(e,t,n){e==s&&(mp.game.cam.doScreenFadeOut(2e3),mp.game.gameplay.ignoreNextRestart(!0),mp.game.gameplay.setFadeOutAfterDeath(!1))});var T={german:{loginregister:{tab_login:"Login",tab_register:"Register",username:"Benutzername",password:"Passwort",login_titel:"Willkommen zurueck!",login_forgotpw:"Passwort vergessen?",login_button:"Einloggen",register_titel:"Registriere dich auf TDS",register_email:"Email-Adresse für Passwort-Reset",register_confirmpw:"Passwort bestaetigen",register_button:"Abschicken",forgotpw_titel:"Setze dein Passwort zurueck!",forgotpw_email:"Email-Adresse",forgotpw_reset:"Zuruecksetzen",passwordhastobesame:"Beide Passwoerter muessen die selben sein!"},round:{outside_map_limit:"Du bist außerhalb der Map-Grenze!\nDir bleiben noch {1} Sekunden, um zurück zu gehen.",planting:"Lege Bombe ...",defusing:"Entschärfe ..."},lobby_choice:{arena:"Arena",gang:"Gang",custom:"Eigenes",player:"Spieler",spectator:"Zuschauer",back:"Zurück",create:"Erstellen",custom_lobby_own:"Eigene Lobby",lobby_name:"Lobby-Name",bomb:"Bombe",lobby_password:"Lobby-Passwort",max_players:"max. Spieler",round_time:"Runden-Zeit (Sekunden)",countdown_time:"Countdown-Zeit (Sekunden)",armor:"Weste",health:"HP",time_scale:"Zeit-Tempo"},scoreboard:{name:"Name",playtime:"Spielzeit",kills:"Kills",assists:"Assists",deaths:"Tode",team:"Team",lobby:"Lobby"},mapcreator_menu:{send_text:"Senden",send_description:"Sende die Map zum Server.",spawnpoint_text:"Spawn-Punkt",spawnpoint_description:"Füge Spawn-Punkte hinzu oder entferne sie!",team_text:"Team-Nummer",team_description:"Setze die Team-Nummer.",spawnpoint_add_text:"Spawnpunkt hinzufügen",spawnpoint_add_description:"Fügt einen Spawnpunkt hinzu.",maplimit_text:"Map-Limit",maplimit_description:"Setze die Ecken des Map-Limits (optional).",maplimit_add_text:"Ecke hinzufügen",maplimit_add_description:"Fügt eine Ecke für die Map-Begrenzung hinzu."}},english:{loginregister:{tab_login:"Login",tab_register:"Register",username:"username",password:"password",login_titel:"Welcome back!",login_forgotpw:"Password forgotten?",login_button:"login",register_titel:"Register at TDS!",register_email:"Email-address for password-reset",register_confirmpw:"confirm password",register_button:"Send",forgotpw_titel:"reset your password",forgotpw_email:"Email-address",forgotpw_reset:"reset",passwordhastobesame:"Both passwords have to be the same!"},round:{outside_map_limit:"You are outside of the map!\nThere are {1} seconds left to return to the map.",planting:"planting ...",defusing:"defusing ..."},lobby_choice:{arena:"Arena",gang:"Gang",custom:"Custom",player:"player",spectator:"spectator",back:"back",create:"create",lobby_name:"lobby-name",bomb:"bomb",lobby_password:"lobby-password",max_players:"max. players",round_time:"round-time (seconds)",countdown_time:"countdown-time (seconds)",armor:"armor",health:"health",time_scale:"time-scale"},scoreboard:{name:"name",playtime:"playtime",kills:"kills",assists:"assists",deaths:"deaths",team:"team",lobby:"lobby",custom_lobby_own:"own lobby"},mapcreator_menu:{send_text:"send",send_description:"Sends your map.",spawnpoint_text:"spawn-point",spawnpoint_description:"Add spawn-points or remove them!",team_text:"team-number",team_description:"Sets the team-number.",spawnpoint_add_text:"add spawn-point",spawnpoint_add_description:"Adds a spawn-point.",maplimit_text:"map-limit",maplimit_description:"Sets the corners for the map-limit (optional).",maplimit_add_text:"add corner",maplimit_add_description:"Adds a corner for the map-limit."}}},z="english";function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=t?T[z][e][t]:T[z][e]}function D(e){z=e,mp.events.callRemote("onPlayerLanguageChange",e)}mp.events.add("setLanguage",D);function Y(){var e;2==mp.game.invoke("3160758157564346030",0)&&(z="german")}Y();function E(){return z}var X={loginbrowser:null,name:null,isregistered:null};mp.events.add("loginFunc",function(e){mp.events.callRemote("onPlayerTryLogin",e)}),mp.events.add("registerFunc",function(e,t){mp.events.callRemote("onPlayerTryRegister",e,t)}),mp.events.add("getRegisterLoginLanguage",function(){X.loginbrowser.execute("loadLanguage ( "+JSON.stringify(A("loginregister"))+");")}),mp.events.add("startRegisterLogin",function(e,t){l("startRegisterLogin registerlogin start"),X.name=t[0],X.isregistered=t[1],X.loginbrowser=mp.browsers.new("client/window/registerlogin/registerlogin.html"),mp.events.add("browserDomReady",function(e){e==X.loginbrowser&&X.loginbrowser.execute("getLoginPanelData ( "+X.name+", "+X.isregistered+", "+JSON.stringify(A("loginregister"))+");")}),mp.gui.chat.activate(!1),mp.game.ui.displayHud(!1),mp.gui.cursor.visible=!0,i++,l("startRegisterLogin registerlogin end")}),mp.events.add("registerLoginSuccessful",function(e,t){l("registerLoginSuccessful registerlogin start"),X.loginbrowser.destroy(),X.loginbrowser=null,mp.gui.chat.activate(!0),i--,l("registerLoginSuccessful registerlogin end")}),mp.events.callRemote("onPlayerJoin");var J={changed:!1,gotbomb:!1,placestoplant:[],plantdefuseevent:!1,isplanting:!1,isdefusing:!1,plantdefusestarttick:0,plantedpos:null};function F(){var e=u()-J.plantdefusestarttick;if(e<Me.bombplanttime){mp.game.graphics.drawRect(.46*n.x,.7*n.y,.08*n.x,.02*n.y,0,0,0,187);var t=e/Me.bombplanttime;mp.game.graphics.drawRect(.461*n.x,.701*n.y,.078*n.x*t,.018*n.y,0,180,0,187),mp.game.graphics.drawText(A("round","planting"),1,{r:255,g:255,b:255,a:255},.4,.4,!0,.5*n.x,.71*n.y)}}function I(){for(var e=!1,t=mp.players.local.position,n=0;n<J.placestoplant.length&&!e;n++){var i=J.placestoplant[n];mp.game.gameplay.getDistanceBetweenCoords(t.x,t.y,t.z,i.x,i.y,i.z,!0)<=5&&(e=!0)}e?J.isplanting?F():(J.plantdefusestarttick=u(),J.isplanting=!0,mp.events.callRemote("onPlayerStartPlanting")):N()}function O(){var e=u()-J.plantdefusestarttick;if(e<Me.bombdefusetime){mp.game.graphics.drawRect(.46*n.x,.7*n.y,.08*n.x,.02*n.y,0,0,0,187);var t=e/Me.bombdefusetime;mp.game.graphics.drawRect(.461*n.x,.701*n.y,.078*n.x*t,.018*n.y,180,0,0,187),mp.game.graphics.drawText(A("round","defusing"),1,{r:255,g:255,b:255,a:255},.4,.4,!0,.5*n.x,.71*n.y)}}function B(){var e=mp.players.local.position;mp.game.gameplay.getDistanceBetweenCoords(e.x,e.y,e.z,J.plantedpos.x,J.plantedpos.y,J.plantedpos.z,!0)<=5?J.isdefusing?O():(J.plantdefusestarttick=u(),J.isdefusing=!0,mp.events.callRemote("onPlayerStartDefusing")):N()}function N(){J.isplanting?(J.isplanting=!1,mp.events.callRemote("onPlayerStopPlanting")):J.isdefusing&&(J.isdefusing=!1,mp.events.callRemote("onPlayerStopDefusing"))}function G(){if(mp.players.local.weapon==WeaponHash.Unarmed){if(!mp.players.local.isDeadOrDying(!0))return J.gotbomb?void I():void B();N()}else N()}function K(e){J.changed=!0,J.gotbomb=!0;for(var t=e.Count;t--;)J.placestoplant[t]=e[t];J.plantdefuseevent=!0}function W(){J.gotbomb=!1,J.plantdefuseevent=!1,J.isplanting=!1}function Z(e,t){t&&(J.changed=!0,J.plantedpos=e,J.plantdefuseevent=!0),Ce(Me.bombdetonatetime)}function j(){mp.game.cam.shakeGameplayCam("LARGE_EXPLOSION_SHAKE",1),new b(mp.game.cam.stopGameplayCamShaking,4e3,1)}function H(){J.changed&&(J={changed:!1,gotbomb:!1,placestoplant:[],plantdefuseevent:!1,isplanting:!1,isdefusing:!1,plantdefusestarttick:0,plantedpos:null})}var Q={camera:null,tocamera:null,moving:!1,timer:null};function U(e){var t={x:e.x,y:e.x,z:e.z+80};Q.camera=mp.cameras.new(t,{x:270,y:0,z:0}),Q.camera.pointAtCoord(e.x,e.y,e.z),Q.camera.setActive(!0)}function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;Q.tocamera=mp.cameras.new(o.getCoord(),mp.game.cam.getGameplayCamRot(0)),Q.camera.setActiveWithInterp(Q.tocamera,-1==e?.9*Me.countdowntime:e,!0,!0)}function q(){Q.camera.destroy(),Q.camera=null,Q.tocamera.destroy(),Q.tocamera=null,Q.camera.setActive(!1)}var V={browser:null};mp.events.add("joinArena",function(e){mp.events.callRemote("joinLobby",1,e)}),mp.events.add("getLobbyChoiceLanguage",function(){l("getLobbyChoiceLanguage start"),V.browser.execute("getLobbyChoiceLanguage ("+JSON.stringify(A("lobby_choice"))+")"),l("getLobbyChoiceLanguage end")}),mp.events.add("createLobby",function(){}),mp.events.add("onClientJoinMainMenu",function(e){l("onClientJoinMainMenu start"),V.browser=mp.browsers.new("client/window/lobby/choice.html"),mp.events.add("browserDomReady",function(e){e==V.browser&&V.browser.execute("getLobbyChoiceLanguage ("+JSON.stringify(A("lobby_choice"))+")")}),mp.gui.cursor.visible=!0,i++,l("onClientJoinMainMenu end")});function ee(){V.browser.destroy(),0==--i&&(mp.gui.cursor.visible=!1)}mp.events.add("onClientPlayerJoinLobby",function(e){l("onClientPlayerJoinLobby start"),ee(),l("onClientPlayerJoinLobby end")}),mp.events.add("onClientPlayerJoinRoundlessLobby",function(e){l("onClientPlayerJoinRoundlessLobby start"),ee(),l("onClientPlayerJoinRoundlessLobby end")});var te=["go.wav","1.wav","2.wav","3.wav"],ne={sounds:["go.wav","1.wav","2.wav","3.wav"],text:null,timer:null};function ie(e){l("countdownFunc start"),--e>0&&(ne.text.setText(e.toString()),ne.text.blendTextScale(6,1e3),ne.timer=new b(ie,1e3,1,e),te[e]),l("countdownFunc end")}function ae(){l("startCountdown start"),ne.text=new P(Math.floor(Me.countdowntime/1e3).toString(),n.x/2,.2*n.y,1,{r:255,g:255,b:255,a:255},2,2,!0),ne.timer=new b(ie,Me.countdowntime%1e3,1,Math.floor(Me.countdowntime/1e3)+1),l("startCountdown end")}function se(e){l("startCountdownAfterwards start"),ne.text=new P(e.toString(),n.x/2,.2*n.y,1,{r:255,g:255,b:255,a:255},2,2,!0),ie(e+1),l("startCountdownAfterwards end")}function oe(){l("endCountdown start"),null==ne.text?ne.text=new P("GO",n.x/2,.2*n.y,1,{r:255,g:255,b:255,a:255},2,2,!0):ne.text.setText("GO"),null!=ne.timer&&ne.timer.kill(),ne.timer=new b(re,2e3,1),l("endCountdown end")}function re(){l("stopCountdown start"),null!=ne.text&&(ne.text.remove(),ne.text=null),null!=ne.timer&&(ne.timer.kill(),ne.timer=null),l("stopCountdown end")}var le={limit:[],outsidecounter:11,checktimer:null,minX:0,maxX:0,minY:0,maxY:0,outsidetext:null};function me(e){if(e.X<le.minX||e.X>le.maxX||e.Y<le.minY||e.Y>le.maxY)return!1;for(var t=!1,n=le.limit,i=0,a=n.length-1;i<n.length;a=i++){var s=n[i].X,o=n[i].Y,r=n[a].X,l=n[a].Y,m;o>e.Y!=l>e.Y&&e.X<(r-s)*(e.Y-o)/(l-o)+s&&(t=!t)}return t}function ce(){if(l("checkMapLimit start"),null!=le.limit){var e;me(mp.players.local.position)?ue():(le.outsidecounter--,10==le.outsidecounter&&null==le.outsidetext?le.outsidetext=new P(A("round","outside_map_limit").replace("{1}",le.outsidecounter),n.x/2,n.y/2,1,{r:255,g:255,b:255,a:255},1.2,1.2,!0):le.outsidecounter>0?le.outsidetext.setText(A("round","outside_map_limit").replace("{1}",le.outsidecounter)):0==le.outsidecounter&&(mp.events.callRemote("onPlayerWasTooLongOutsideMap"),le.checktimer.kill(),le.checktimer=null,le.outsidetext.remove(),le.outsidetext=null))}else ue();l("checkMapLimit start")}function de(e){l("loadMapLimitData start"),le.limit=[];for(var t=0;t<e.Count;t++)le.limit[t]=e[t];if(le.outsidecounter=11,e.Count>0){for(var n=le.limit[0].X,i=le.limit[0].X,a=le.limit[0].Y,s=le.limit[0].Y,o=1;o<e.Count;o++){var r=le.limit[o];n=Math.min(r.X,n),i=Math.max(r.X,i),a=Math.min(r.Y,a),s=Math.max(r.Y,s)}le.minX=n,le.maxX=i,le.minY=a,le.maxY=s}l("loadMapLimitData end")}function ue(){null!=le.outsidetext&&(le.outsidecounter=11,le.outsidetext.remove(),le.outsidetext=null)}function pe(){l("startMapLimit start"),null!=le.checktimer&&le.checktimer.kill(),void 0!=le.limit[0]&&(le.checktimer=new b(ce,1e3,-1)),l("startMapLimit end")}function ge(){l("stopMapLimitCheck start"),null!=le.checktimer&&(le.checktimer.kill(),le.checktimer=null),le.outsidecounter=11,null!=le.outsidetext&&(le.outsidetext.remove(),le.outsidetext=null),l("stopMapLimitCheck end")}function he(){le.limit=[]}var fe={mapinfo:null,isspectator:!0,infight:!1};function be(e){fe.mapinfo=new P(e,.5*n.x,.95*n.y,1,{r:255,g:255,b:255,a:255},.5,.5,!0)}mp.events.add("render",function(){fe.infight});function ye(){l("removeMapInfo start"),null!=fe.mapinfo&&(fe.mapinfo.remove(),fe.mapinfo=null),l("removeMapInfo end")}function ve(e){l("removeRoundThings start"),De(),re(),e&&ye(),l("removeRoundThings end")}function we(e){e?fe.infight=!0:(fe.infight=!1,ge())}var xe={amountinteams:[],aliveinteams:[],roundtime:0,starttick:0,teamnames:[],teamcolors:[],drawevent:!1,killinfo:[],drawdata:{time:{text:{ypos:.005*n.y,scale:.5,r:255,g:255,b:255,a:255},rectangle:{xpos:.47*n.x,ypos:0,width:.06*n.x,height:.05*n.y,r:20,g:20,b:20,a:180}},team:{text:{ypos:.002*-n.y,scale:.41,r:255,g:255,b:255,a:255},rectangle:{ypos:0,width:.13*n.x,height:.06*n.y,a:180}},kills:{showtick:15e3,fadeaftertick:11e3,xpos:.99*n.x,ypos:.45*n.y,scale:.3,height:.04*n.y}}};function ke(){if(xe.drawevent){var e=u(),t=Math.ceil((xe.roundtime-(e-xe.starttick))/1e3),n=Math.floor(t/60),i=t%60,a=xe.drawdata.time.text,s=xe.drawdata.time.rectangle;mp.game.graphics.drawText(n+":"+(i>=10?i:"0"+i),1,{r:a.r,g:a.g,b:a.b,a:a.a},a.scale,a.scale,s.xpos+s.width/2,a.ypos,!0),mp.game.graphics.drawRect(s.xpos,s.ypos,s.width,s.height,s.r,s.g,s.b,s.a);for(var o=xe.drawdata.team.text,r=xe.drawdata.team.rectangle,l=Math.ceil(xe.teamnames.length/2),m=0;m<l;m++){var c=s.xpos-r.width*(m+1);mp.game.graphics.drawText(xe.teamnames[m]+"\n"+xe.aliveinteams[m]+"/"+xe.amountinteams[m],1,{r:o.r,g:o.g,b:o.b,a:o.a},o.scale,o.scale,c+r.width/2,o.ypos,!0),mp.game.graphics.drawRect(c,r.ypos,r.width,r.height,xe.teamcolors[0+3*m],xe.teamcolors[1+3*m],xe.teamcolors[2+3*m],r.a)}for(var d=0;d<xe.teamnames.length-l;d++){var p=s.xpos+s.width+r.width*d,g=l+d;mp.game.graphics.drawText(xe.teamnames[g]+"\n"+xe.aliveinteams[g]+"/"+xe.amountinteams[g],{r:o.r,g:o.g,b:o.b,a:o.a},o.scale,o.scale,p+r.width/2,1,o.ypos,!0),mp.game.graphics.drawRect(p,r.ypos,r.width,r.height,xe.teamcolors[0+3*g],xe.teamcolors[1+3*g],xe.teamcolors[2+3*g],r.a)}}}mp.events.add("render",ke);function Ce(e){xe.starttick=u()-(xe.roundtime-e)}mp.events.add("render",function(){var e=xe.killinfo.length;if(e>0)for(var t=u(),n=e-1;n>=0;n--){var i=t-xe.killinfo[n].starttick,a=xe.drawdata.kills;if(!(i<a.showtick)){xe.killinfo.splice(0,n+1);break}var s=i<=a.fadeaftertick?255:Math.ceil((a.showtick-i)/(a.showtick-a.fadeaftertick)*255),o=e-n-1;mp.game.graphics.drawText(xe.killinfo[n].killstr,2,{r:255,g:255,b:255,a:s},a.scale,a.scale,a.xpos,a.ypos+o*a.height,!0)}});function _e(){xe.amountinteams=[],xe.aliveinteams=[],xe.drawevent=!1}function Se(e){xe.starttick=u(),2 in e&&(xe.starttick-=e[2]),xe.drawevent=!0}function Le(e,t){for(var n=1;n<e.Count;n++)xe.teamnames[n-1]=e[n];for(var i=3;i<t.Count;i++)xe.teamcolors[i-3]=t[i]}function Pe(e,t){xe.aliveinteams[e]--,xe.killinfo.push({killstr:t,starttick:u()})}mp.events.add("onClientPlayerAmountInFightSync",function(e,t){l("onClientPlayerAmountInFightSync start"),xe.amountinteams=[],xe.aliveinteams=[];for(var n=0;n<t[0].Count;n++)xe.amountinteams[n]=t[0][n],0==t[1]?xe.aliveinteams[n]=t[0][n]:xe.aliveinteams[n]=t[2][n];l("onClientPlayerAmountInFightSync end")});var Me={countdowntime:0,bombdetonatetime:0,bombplanttime:0,bombdefusetime:0,roundendtime:0},Re={binded:!1};function Te(e,t){mp.events.callRemote("spectateNext",!1)}function ze(e,t){mp.events.callRemote("spectateNext",!0)}function Ae(){Re.binded||(mp.keys.bind(Keys.LeftArrow,!0,Te),mp.keys.bind(Keys.A,!0,Te),mp.keys.bind(Keys.RightArrow,!0,ze),mp.keys.bind(Keys.D,!0,ze),Re.binded=!0)}function De(){Re.binded&&(mp.keys.unbind(Keys.LeftArrow,!0,Te),mp.keys.unbind(Keys.A,!0,Te),mp.keys.unbind(Keys.RightArrow,!0,ze),mp.keys.unbind(Keys.D,!0,ze),Re.binded=!1)}mp.events.add("onClientPlayerJoinLobby",function(e){l("onClientPlayerJoinLobby start"),fe.isspectator=e[0],be(e[1]),Le(e[2],e[3]),Me.countdowntime=e[4],xe.roundtime=e[5],Me.bombdetonatetime=e[6],Me.bombplanttime=e[7],Me.bombdefusetime=e[8],Me.roundendtime=e[9],l("onClientPlayerJoinLobby end")}),mp.events.add("onClientPlayerLeaveLobby",function(e){l("onClientPlayerLeaveLobby start"),mp.players.local==e[0]&&(we(!1),H(),ve(!0),q(),_e()),l("onClientPlayerLeaveLobby end")}),mp.events.add("onClientJoinMainMenu",function(e){mp.game.cam.doScreenFadeIn(100)}),mp.events.add("onClientMapChange",function(e){l("onClientMapChange start"),mp.game.cam.doScreenFadeIn(Me.roundendtime/2),e[0].Count>0&&de(e[0]),U(e[1]),l("onClientMapChange end")}),mp.events.add("onClientCountdownStart",function(e){l("onClientCountdownStart start "),null!=Q.timer&&Q.timer.kill(),1 in e?(se(Math.ceil((Me.countdowntime-e[1])/1e3)),e[1]>.1*Me.countdowntime?$(Me.countdowntime-e[1]):Q.timer=new b($,.1*Me.countdowntime-e[1],1)):(ae(),Q.timer=new b($,.1*Me.countdowntime,1)),fe.isspectator&&Ae(),fe.mapinfo.setText(e[0]),l("onClientCountdownStart end")}),mp.events.add("onClientRoundStart",function(e){l("onClientRoundStart start"),mp.game.cam.doScreenFadeIn(50),q(),oe(),fe.isspectator=e[0],fe.isspectator||(pe(),we(!0)),Se(e),l("onClientRoundStart end")}),mp.events.add("onClientRoundEnd",function(e){l("onClientRoundEnd start"),mp.game.cam.doScreenFadeOut(Me.roundendtime/2),we(!1),H(),he(),ve(!1),re(),q(),_e(),l("onClientRoundEnd end")}),mp.events.add("onClientPlayerSpectateMode",function(e){l("onClientPlayerSpectateMode start"),fe.isspectator=!0,Ae(),l("onClientPlayerSpectateMode end")}),mp.events.add("onClientPlayerDeath",function(e,t,n){l("onClientPlayerDeath start"),mp.players.local==e&&(we(!1),H()),Pe(t,n),l("onClientPlayerDeath end")}),mp.events.add("PlayerQuit",function(e,t,n){l("onClientPlayerQuit start"),l("onClientPlayerQuit end")}),mp.events.add("onClientPlayerGotBomb",function(e){K(e[0])}),mp.events.add("onClientPlayerPlantedBomb",function(e){W()}),mp.events.add("onClientBombPlanted",function(e){Z(e[0],e[1])}),mp.events.add("onClientBombDetonated",function(e){j()});