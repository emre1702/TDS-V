"use strict";var t=[0,0],e=40,n=!0,r=!1,a=$("#main-input"),o=[$("#normal-chat-body"),$("#dirty-chat-body")],i=[$("#normal-chat"),$("#dirty-chat")],c=["$normal$","$dirty$"],l=i[0],g=0,h=[[/#r#/g,"rgb(222, 50, 50)"],[/#b#/g,"rgb(92, 180, 227)"],[/#g#/g,"rgb(113, 202, 113)"],[/#y#/g,"rgb(238, 198, 80)"],[/#p#/g,"rgb(131, 101, 224)"],[/#q#/g,"rgb(226, 79, 128)"],[/#o#/g,"rgb(253, 132, 85)"],[/#s#/g,"rgb(220, 220, 220)"],[/#w#/g,"white"],[/#dr#/g,"rgb(169, 25, 25)"]];function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(t=null===t?p():t).animate({scrollTop:t.prop("scrollHeight")},"slow")}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!n&&t||t!==r&&(mp.invoke("focus",t),t?(a.fadeIn(),a.val(e),setTimeout(function(){a.focus()},100)):(a.hide(),a.val("")),r=t,mp.trigger("onChatInputToggle",t))}var chatAPI={};chatAPI.push=v,chatAPI.clear=function(){p().html("")},chatAPI.activate=function(t){f(t)},chatAPI.show=function(t){if(t){p().show();for(var e=0;e<i.length;++e)i[e].show()}else{p().hide();for(var r=0;r<i.length;++r)i[r].hide()}n=t};function u(t){var e='<span style="color: white;">',n=t;if(-1!==t.indexOf("#")){for(var r=0;r<h.length;++r)n=n.replace(h[r][0],"</span><span style='color: "+h[r][1]+";'>");n=n.replace(/#n#/g,"<br>")}return e+n+"</span>"}function d(n,r,a){r.append(n),++t[a]>=e&&(--t[a],r.find("text:first").remove()),s(r)}function v(t){for(var e=0;e<c.length;++e)if(t.endsWith(c[e])){t=t.slice(0,-c[e].length);var n=p(e),r=u(t),a;return void d($("<text>"+r+"</text>"),n,e)}for(var i=u(t),l=0;l<o.length;++l){var g=p(l),h;d($("<text>"+i+"</text>"),g,l)}}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e;return o[-1===t?g:t]}$(document).ready(function(){$("body").keydown(function(t){if(84===t.which&&!r&&n)t.preventDefault(),f(!0);else if(90===t.which&&!r&&n)t.preventDefault(),f(!0,"/globalsay ");else if(13===t.which&&r){t.preventDefault();var e=a.val();e&&("/"===e[0]?(e=e.substr(1)).length>0&&mp.invoke("command",e):mp.invoke("chatMessage",e+c[g])),f(!1)}}),l.css("background","#04074e"),$("#chat_choice div").click(function(){g!==$(this).attr("data-chatID")&&(l.css("background","#A9A9A9"),o[g].hide(400),(l=$(this)).css("background","#04074e"),g=l.attr("data-chatID"),o[g].show(400))}),mp.trigger("onChatLoad")});