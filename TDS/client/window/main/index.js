"use strict";var e=void 0,t=void 0,a=void 0,o=void 0,n=void 0,s="ENGLISH",i=void 0,r=void 0,d=void 0,l=void 0,p=void 0,c=void 0,v=void 0,f=void 0,u=void 0,m="",g=!1,h=[],_=[],b="",y=!1,C=!1,w=!1,x=!0;function setMoney(e){t.text("$"+e)}function playSound(e){$("#audio_"+e).trigger("play").volume=.05}function showBloodscreen(){a.stop().show(0).hide(2500)}function O(e){var t='<span style="color: white;">',a=e;return-1!==e.indexOf("~")&&(a=a.replace(/~r~/g,'</span><span style="color: rgb(222, 50, 50);">').replace(/~b~/g,'</span><span style="color: rgb(92, 180, 227);">').replace(/~g~/g,'</span><span style="color: rgb(113, 202, 113);">').replace(/~y~/g,'</span><span style="color: rgb(238, 198, 80);">').replace(/~o~/g,'</span><span style="color: rgb(253, 132, 85);">').replace(/~s~/g,'</span><span style="color: rgb(220, 220, 220);">').replace(/~w~/g,'</span><span style="color: white;">').replace(/~dr~/g,'</span><span style="color: rgb( 169, 25, 25 );">').replace(/~n~/g,"<br>")),t+a+"</span>"}function N(e){e.remove()}function addKillMessage(e){var t=$("<text>"+O(e)+"<br></text>");o.append(t),t.delay(11e3).fadeOut(4e3,t.remove)}function openMapMenu(t,a){e.show(1e3),g=!0,s=t,m="",b="",i.empty(),r.empty(),d.empty(),l.empty(),n=JSON.parse(a);for(var o=0;o<n.length;++o){var p=$("<div>"+n[o].Name+"</div>");0===n[o].Type?i.append(p):r.append(p),-1!=_.indexOf(n[o].Name)&&d.append(p.clone())}for(var c=0;c<h.length;++c)l.append($("<div>"+h[c].name+"</div>"));i.selectable("refresh"),r.selectable("refresh"),d.selectable("refresh"),l.selectable("refresh")}function closeMapMenu(){g=!1,e.hide(500),C&&(f.hide(500),v.hide(500),u.hide(500),C=!1)}function M(e,t){return e.votes>t.votes?-1:1}function S(){h.sort(M)}function k(e){h.push({name:e,votes:1});var t=$("<div>"+h.length+". "+e+" (1)</div>");p.append(t),g&&(l.append($("<div>"+e+"</div>")),l.selectable("refresh")),b===e&&(t.addClass("mapvoting_selected"),b="")}function T(){for(var e=p.children(),t=0;t<e.length;++t)t in h?e.eq(t).text(t+1+". "+mapname+" ("+votes[t].votings+")"):h.splice(t)}function D(e){for(var t=0;t<h.length;++t)if(h[t].name===e){--h[t].votes<=0&&(h.splice(t,1),p.children().eq(t).remove());break}T()}function addVoteToMapVoting(e,t){b===e&&$(".mapvoting_selected").removeClass("mapvoting_selected"),void 0!==t&&D(t);for(var a=!1,o=0;o<h.length&&!a;++o)if(h[o].name===e){++h[o].votes;var n=p.children().eq(o);n.text(o+1+". "+e+"("+h[o].votes+")"),b===e&&(n.addClass("mapvoting_selected"),b=""),a=!0}a||k(e),S()}function loadMapVotings(e){var t=JSON.parse(mapsvotesjson);h=[];for(var a in t)h.push({name:a,votes:t[a]});S()}function clearMapVotings(){h=[]}function J(){y=!0,f.disabled=!0,setTimeout(function(){y=!1,f.disabled=!1},1500)}$("body").keydown(function(e){var t=e.which;if(x&&t>=97&&t<=105){if(y)return;e.preventDefault();var a=9-(105-t)-1;h.length>a&&(b=h[a].name,mp.trigger("onMapMenuVote",b),J())}});function q(e){-1!==_.indexOf(e)?w||(u.removeClass("add_map_to_favourites_notselected").addClass("add_map_to_favourites_selected"),w=!0):w&&(u.removeClass("add_map_to_favourites_selected").addClass("add_map_to_favourites_notselected"),w=!1)}function loadFavouriteMaps(e){_=JSON.parse(e)}function loadOrderNames(e){c.empty();for(var t=JSON.parse(e),a=0;a<t.length&&a<9;++a)c.append($("<div>"+(a+1)+". "+t[a]+"</div>"))}function toggleCanVoteForMapWithNumpad(e){x=e,e?(c.hide(300),p.show(300)):(c.show(300),p.hide(300))}$(document).ready(function(){e=$("#mapmenu"),p=$("#mapvoting"),t=$("#money"),a=$("#bloodscreen"),o=$("#kill_messages_box"),i=$("#tabs-1"),r=$("#tabs-2"),d=$("#tabs-3"),l=$("#tabs-4"),v=$("#map_info"),f=$("#choose_map_button"),u=$("#add_map_to_favourites"),c=$("#orders"),$("#tabs").tabs({collapsible:!0,heightStyle:"fill"}),$(".tab_list").each(function(e,t){$(this).selectable({selected:function e(t,a){$(".ui-selected").removeClass("ui-selected"),$(a.selected).addClass("ui-selected");var o=a.selected.innerHTML;q(o);for(var i=0;i<n.length;++i)if(o===n[i].Name)return m=o,C||(f.show(0),v.show(0),u.show(0),C=!0),void v.html(n[i].Description[s])},autoRefresh:!1})}),f.click(function(e){e.preventDefault(),y||""!==m&&(b=m,mp.trigger("onMapMenuVote",b),J())}),u.click(function(e){if(e.preventDefault(),""!==m){var t=_.indexOf(m);-1===t?(_.push(m),u.removeClass("add_map_to_favourites_notselected").addClass("add_map_to_favourites_selected"),mp.trigger("onClientToggleMapFavourite",m,!0),d.append($("<div>"+m+"</div>"))):(_.splice(t,1),u.removeClass("add_map_to_favourites_selected").addClass("add_map_to_favourites_notselected"),mp.trigger("onClientToggleMapFavourite",m,!1),d.children("div:contains('"+m+"')").remove()),d.selectable("refresh")}})});