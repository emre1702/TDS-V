/// <reference path="../types-ragemp/index.d.ts" />

var languagelist = {
    "ENGLISH": {
        "loginregister": {
            "tab_login": "Login",
            "tab_register": "Register",
            "username": "username",
            "password": "password",
            "login_titel": "Welcome back!",
            "login_forgotpw": "Password forgotten?",
            "login_button": "login",
            "register_titel": "Register at TDS!",
            "register_email": "Email-address for password-reset",
            "register_confirmpw": "confirm password",
            "register_button": "Send",
            "forgotpw_titel": "reset your password",
            "forgotpw_email": "Email-address",
            "forgotpw_reset": "reset",
            "passwordhastobesame": "Both passwords have to be the same!"
        },
        "round": {
            "outside_map_limit": "You are outside of the map!\nThere are {1} seconds left to return to the map.",
            "planting": "planting ...",
            "defusing": "defusing ..."
        },
        "lobby_choice": {
            "arena": "Arena",
            "gang": "Gang",
            "custom": "Custom",
            "mapcreator": "Map-Creator",
            "player": "player",
            "spectator": "spectator",
            "back": "back",
            "create": "create",
            "lobby_name": "lobby-name",
            "bomb": "bomb",
            "lobby_password": "lobby-password",
            "max_players": "max. players",
            "round_time": "round-time (seconds)",
            "countdown_time": "countdown-time (seconds)",
            "armor": "armor",
            "health": "health",
            "time_scale": "time-scale",
            "custom_lobby_own": "own lobby"
        },
        "scoreboard": {
            "name": "name",
            "playtime": "playtime",
            "kills": "kills",
            "assists": "assists",
            "deaths": "deaths",
            "team": "team",
            "lobby": "lobby",
        },
        "mapcreator_menu": {
            "general": "General",
            "descriptions": "Descriptions",
            "team_spawns": "Team-spawns",
            "map_limit": "Map-limit",
            "map_points": "Map-points",
            "bomb_places": "Bomb-places",
            "min_players": "Min-players:",
            "max_players": "Max-players:",
            "last": "Last",
            "normal": "Normal",
            "bomb": "Bomb",
            "add": "Add",
            "go": "Go",
            "remove": "Remove",
            "last_info": "When you send the map, it will get saved on the server.<br>Then Bonus has the chance to load the map and test it.<br>"
            + "If he find mistakes or problems, he will solve them.<br>At the end if the map is acceptable, he will make it playable.<br><br>"
            + "This whole process can take a bit, so you have to wait atleast 1-2 days.<br>Please first use 'Check', then maybe improve the map and at the end press 'Send'",
            "send": "Send",
            "check": "Check",
            "map_name_already_used": "The map name is already used!<br>Please change it and use 'Check' again.",
            "map_name_atleast": "The map name has to consist of atleast {1} chars.",
            "map_min_players_min_max": "The min-players has to be min. {1} and max. {2}.",
            "map_max_players_min_max": "The max-players has to be min. {1} and max. {2}.",
            "map_team_spawns_min_per_team": "The min. amount for spawns per team has to be atleast {1}.",
            "map_limit_min_max": "The map-limit amount has to be 0 or min. {1} and max. {2}.",
            "bomb_places_min": "There has to be atleast one bomb-place to be able to place the bomb.",
        },
        "orders": ["Attack! Go go go!", "Stay back!", "Spread out!", "Go to the bomb!"]
    },	
	"GERMAN": {
		"loginregister": {
			"tab_login": "Login",
			"tab_register": "Register",
			"username": "Benutzername",
			"password": "Passwort",
			"login_titel": "Willkommen zurueck!",
			"login_forgotpw": "Passwort vergessen?",
			"login_button": "Einloggen",
			"register_titel": "Registriere dich auf TDS",
			"register_email": "Email-Adresse für Passwort-Reset",
			"register_confirmpw": "Passwort bestaetigen",
			"register_button": "Abschicken",
			"forgotpw_titel": "Setze dein Passwort zurueck!",
			"forgotpw_email": "Email-Adresse",
			"forgotpw_reset": "Zuruecksetzen",
			"passwordhastobesame": "Beide Passwoerter muessen die selben sein!"
		},
		"round": {
			"outside_map_limit": "Du bist außerhalb der Map-Grenze!\nDir bleiben noch {1} Sekunden, um zurück zu gehen.",
			"planting": "Lege Bombe ...",
			"defusing": "Entschärfe ..."
		},
		"lobby_choice": {
			"arena": "Arena",
			"gang": "Gang",
            "custom": "Eigenes",
            "mapcreator": "Map-Ersteller",
			"player": "Spieler",
			"spectator": "Zuschauer",
			"back": "Zurück",
			"create": "Erstellen",
			"custom_lobby_own": "Eigene Lobby",
			"lobby_name": "Lobby-Name",
			"bomb": "Bombe",
			"lobby_password": "Lobby-Passwort",
			"max_players": "max. Spieler",
			"round_time": "Runden-Zeit (Sekunden)",
			"countdown_time": "Countdown-Zeit (Sekunden)",
			"armor": "Weste",
			"health": "HP",
			"time_scale": "Zeit-Tempo",
		},
		"scoreboard": {
			"name": "Name",
			"playtime": "Spielzeit",
			"kills": "Kills",
			"assists": "Assists",
			"deaths": "Tode",
			"team": "Team",
            "lobby": "Lobby"
		},
        "mapcreator_menu": {
            "general": "Allgemein",
            "descriptions": "Beschreibungen",
            "team_spawns": "Team-Spawns",
            "map_limit": "Map-Limit",
            "map_points": "Map-Punkte",
            "bomb_places": "Bomben-Plätze",
            "min_players": "Min-Spieler:",
            "max_players": "Max-Spieler:",
            "last": "Zuletzt",
            "normal": "Normal",
            "bomb": "Bombe",
            "add": "Add",
            "go": "Gehe",
            "remove": "Entfernen",
            "last_info": "Wenn du die Map sendest, wird sie auf dem Server gespeichert.<br>Dann bekommt Bonus die Chance die Map gründlich zu testen.<br>"
            + "Wenn er Probleme oder Fehler findet, fixt er sie.<br>Wenn die Map ausreichend gut ist, wird sie spielbar gemacht.<br><br>"
            + "Dieser ganze Prozess kann etwas dauern, daher solltest du mit min. 1-2 Tagen rechnen.<br>Bitte nutze zuerst 'Prüfen', dann verbessere wenn möglich die Map und danach kannst du 'Senden' nutzen.",
            "send": "Senden",
            "check": "Check",
            "map_name_already_used": "Der Map-Name ist schon in Benutzung.<br>Bitte ändere den Namen und nutze 'Prüfe' erneut.",
            "map_name_atleast": "Der Map-Name muss min. {1} Zeichen lang sein.",
            "map_min_players_min_max": "Die Min-Spieler Anzahl muss min. {1} und max. {2} sein.",
            "map_max_players_min_max": "Die Max-Spieler Anzahl muss min. {1} und max. {2} sein.",
            "map_team_spawns_min_per_team": "Die min. Anzahl an Team-Spawn muss min. {1} pro Team sein.",
            "map_limit_min_max": "Die Anzahl der Team-Limit-Positionen muss 0, min. {1} oder max. {2} sein.",
            "bomb_places_min": "Es muss mindestens einen Bomben-Platz geben, um die Bombe platzieren zu können.",
        },
        "orders": ["Angriff! Los los los!", "Bleibt zurück!", "Teilt euch auf!", "Geht zur Bombe!"],
	}
};
let languagesetting: string = "ENGLISH";


function getLang( type, str = null ) {
	if ( str != null )
		return languagelist[languagesetting][type][str];
	else 
		return languagelist[languagesetting][type];
}

function setLanguage( lang ) {
    languagesetting = lang;
    mp.storage.data.language = lang;
    mp.storage.flush();
	mp.events.callRemote( "onPlayerLanguageChange", lang );
    loadOrderNamesInBrowser( JSON.stringify( getLang( "orders" ) ) );
}
mp.events.add( "setLanguage", setLanguage );

function loadLanguage () {
    let savedlang = mp.storage.data.language;
    if ( typeof savedlang !== "undefined" )
        languagesetting = savedlang;
    else {
        let langnumber = mp.game.invoke( "E7A981467BC975BA", 0 );
        if ( langnumber == 2 ) 
            languagesetting = "" + Language.GERMAN;
    }
}

function getLanguage() {
	return languagesetting;
}