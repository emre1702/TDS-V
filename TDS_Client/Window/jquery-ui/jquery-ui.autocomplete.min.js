"use strict";function addAutocomplete(l,s,a,e){l.bind("keydown",function(e){e.keyCode===$.ui.keyCode.TAB&&$(this).data("autocomplete").menu.active&&e.preventDefault()}).autocomplete({minLength:1,source:function e(t,n){var u=t.term,o=[],i=u.lastIndexOf("#")>u.lastIndexOf("@")?"#":"@";0<=u.indexOf(i)&&0<(u=t.term.split(new RegExp(i+"\\s*")).pop()).length&&(o=$.ui.autocomplete.filter(s,u)),n(o)},focus:function e(){return!1},select:function e(t,n){var u,o=l.val(),i;return o.lastIndexOf("#")>o.lastIndexOf("@")?u=o.split(/#\s*/):(u=o.split(/@\s*/),n.item.value="@"+n.item.value+":"),u.pop(),u.push(n.item.value),u.push(""),l.val(u.join("")),void 0!==a&&a(),!1},close:e,autoFocus:!0})}